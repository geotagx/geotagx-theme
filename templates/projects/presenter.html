{% extends "projects/base.html" %}
{% set active_page = "contribute" %}
{% set active_page_title = _("Contribute") %}
{% set active_page_subtitle = _("Help us analyse the project.") %}

{% block stylesheet %}
{{super()}}
<link rel="stylesheet" href="{{css}}/projects/presenter.min.css">
{% endblock %}


{% block header %}
{{super()}}
{% call bootstrap.render_container(id="project-statistics") %}
<hr class="divider">
<div class="row">
	<div class="col-xs-12">
		<div id="share-project">{{helper.render_project_share_buttons(project)}}</div>
		{% if current_user.is_anonymous() %}
		<p id="anonymous-notification-message" class="show-on-anonymous">{{_("You are contributing to this project anonymously and will not get any credit for your work.")}}</p>
		<ul class="list-inline show-on-anonymous">
			<li><a id="anonymous-sign-in" class="btn btn-lg btn-primary" href="{{url_for('account.signin')}}?next={{request.path}}">{{_("Sign In")}}</a></li>
			<li><button role="button" id="remind-me-later" class="btn btn-lg btn-default">{{_("Remind Me Later")}}</button></li>
		</ul>
		{% endif %}
	</div>
</div>
{% endcall %}
{% endblock %}


{% block main_content %}
<div class="row">
	<div class="col-xs-12">
		{% if project.completed or invite_new_volunteers %}
		<h3>{{_("Thank you for showing an interest in this project.")}}</h3>
		{% if project.completed %}
		<p>{{_("All available tasks for this project have been successfully completed.")}}</p>
		<a class="btn btn-lg btn-primary" href="{{url_for('project.export_to', short_name=project.short_name)}}">{{_("Export Results")}}</a>
		{% elif invite_new_volunteers %}
		<p>{{_("You have participated in all available tasks however we still need more volunteers to contribute.")}}<br>{{_("Help us spread the word by sharing the project!")}}</p>
		{% endif %}
		{% else %}
		{% from "projects/helpers/_presenter.html" import render_presenter %}
		{{render_presenter(project)}}
		{% endif %}
	</div>
</div>
{% endblock %}


{% block script %}
{%- if not (project.completed or invite_new_volunteers) %}
<script src="{{js}}/projects/presenter.min.js" defer></script>
<script>
$("#remind-me-later").click(function(){ $(".show-on-anonymous").fadeOut(); });
var __configuration__ = {{project.info.task_presenter|safe}};
</script>
{% endif -%}
{% endblock %}
